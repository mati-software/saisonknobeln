<!DOCTYPE html>
<html lang="de">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Saisonknobeln</title>
		<style>
			body {
				overflow:hidden;
				padding:0;
				border:0;
				margin:0;
				background-color:black;
			}
		
			#mati_controller_alles {
				position:fixed;
				top:0;
				left:0;
				right:0;
				bottom:0;
				color:white;
				font-family: Helvetica, Arial, sans-serif;
				
				-webkit-user-select: none;  
				-moz-user-select: none;    
				-ms-user-select: none;      
				user-select: none;
			}
			
			.mati_buttonbox {
				position:absolute;
				left:0;
				right:0;
				bottom:0;
				top:4em;
				border-width:.5em;
				border-style:solid;
				box-shadow: inset 0 0 1em black;
			}
			
			.mati_button,
			.mati_button_deaktiviert,
			.mati_button_focus {
				color: black;
				padding:.5em;
				text-align:center;
				line-height:2em;
				border-radius:1.5em;
				vertical-align:middle;
				margin:1em;
				box-shadow:0 0 1em black;
			}
			.mati_button_deaktiviert {
				opacity: .3;
			}
		</style>
		<style id="mati_farbstyle">
		</style>
	</head>
	<body>
		<div id="mati_controller_alles">
			<div id="mati_hauptmenue" class="mati_buttonbox">
				<div class="mati_button">Neue Spiel</div>
				<div class="mati_button">Spiel fortsetzen</div>
				<div class="mati_button">Beenden</div>
			</div>
		</div>
		
		<script src="matiUtil.js" rel="script" type="application/javascript"></script>
		<script src="matiFarbutil.js" rel="script" type="application/javascript"></script>
		<script src='https://tiltspot.tv/api/controller/controller-1.0.0.js' rel='script' type='application/javascript'></script>
		<script>
			var mati = {};
			
			mati.farbe = matiFarbutil.WEISS;
			mati.renderFarbe = function() {
				let hell50dunkel80 = matiFarbutil.toCssString(matiFarbutil.gedimmteFarbe(matiFarbutil.aufgehellteFarbe(mati.farbe, .5), .8));
				let hell50 = matiFarbutil.toCssString(matiFarbutil.aufgehellteFarbe(mati.farbe, .5));
				let dunkel50 = matiFarbutil.toCssString(matiFarbutil.gedimmteFarbe(mati.farbe, .5));
				let dunkel30 = matiFarbutil.toCssString(matiFarbutil.gedimmteFarbe(mati.farbe, .3));
				document.getElementById('mati_farbstyle').innerHTML = `
					.mati_buttonbox {
						background: ${dunkel50} radial-gradient(circle, ${dunkel50}, ${dunkel30});
						border-color: ${hell50};
					}
					
					.mati_button,
					.mati_button_deaktiviert {
						background: ${hell50} radial-gradient(circle, ${hell50}, ${hell50dunkel80});
					}
					.mati_button_focus {
						background: ${hell50dunkel80} radial-gradient(circle, ${hell50dunkel80}, ${hell50});
					}
				`;
			};
			mati.renderFarbe();
			
			Tiltspot.on.ready = function(){
				console.log('ready');
			}
			
			Tiltspot.on.msg = function (msg, data) {
				console.log('msg', msg, data);
				switch (msg) { 
					case 'setFarbe':
						mati.farbe = data;
						mati.renderFarbe();
				}
			};
			
			window.addEventListener("load", function () {
				var onAenderungDerFenstergroesse = function() {
					var allesFontSize = Math.min(window.innerWidth, window.innerHeight) / 20;
					document.getElementById('mati_controller_alles').style["font-size"] = allesFontSize + "px";
				};
				onAenderungDerFenstergroesse();
				window.addEventListener( 'resize', onAenderungDerFenstergroesse, false );
			});
		</script>
	</body>
</html>